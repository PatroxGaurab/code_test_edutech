{
  "name": "discourse-sso",
  "preferGlobal": false,
  "version": "1.0.3",
  "author": {
    "name": "Johan Jatko",
    "email": "johan@re3.io"
  },
  "description": "Single-sign-on helper package for Discourse",
  "license": "MIT",
  "contributors": [
    {
      "name": "Johan Jatko",
      "email": "johan@re3.io"
    }
  ],
  "scripts": {
    "test": "node test.js"
  },
  "main": "./index.js",
  "repository": {
    "type": "git",
    "url": "https://github.com/ArmedGuy/discourse_sso_node"
  },
  "keywords": [
    "discourse",
    "sso",
    "login",
    "helper package"
  ],
  "readme": "# Single-sign-on for Discourse via Node.js\r\n[![Build Status](https://travis-ci.org/ArmedGuy/discourse_sso_node.png?branch=master)](https://travis-ci.org/ArmedGuy/discourse_sso_node)\r\n\r\nAlso available for PHP [here](https://github.com/cviebrock/discourse-php).\r\n\r\nThis is a small class to help with providing an SSO source for Discourse forums.\r\nIt provides three helper functions for validating incoming requests, extracting the nonce, and building the returning queryString.\r\n\r\nFor more information on the SSO settings in Discourse, visit <https://meta.discourse.org/t/official-single-sign-on-for-discourse/13045>\r\n\r\n### How to use the package\r\n\r\n\r\nSimply install via npm, require the package and create a new object, providing the SSO secret defined in Discourse\r\n```javascript\r\nvar discourse_sso = require('discourse-sso');\r\nvar sso = new discourse_sso(\"-your-sso_secret-goes-here-\");\r\n```\r\n\r\n\r\nTo validate incoming logins, you can do:\r\n```javascript\r\nvar payload = ... // fetch from incoming request\r\nvar sig = ... // fetch from incoming request\r\nif(sso.validate(payload, sig)) {\r\n}\r\n```\r\n\r\n\r\nTo extract the [nonce](https://en.wikipedia.org/wiki/Cryptographic_nonce) (the little piece of data that identifies the login), use:\r\n```javascript\r\nvar nonce = sso.getNonce(payload);\r\n```\r\n\r\n\r\nThen, to produce the query string that is to be sent back to Discourse, do:\r\n```javascript\r\nvar userparams = {\r\n\t// Required, will throw exception otherwise\r\n\t\"nonce\": nonce,\r\n\t\"external_id\": \"some user id here\",\r\n\t\"email\": \"some user email\",\r\n\t// Optional\r\n\t\"username\": \"some username\",\r\n\t\"name\": \"some real name\"\r\n};\r\nvar q = sso.buildLoginString(userparams);\r\n```\r\n\r\nLastly, to complete the login process, redirect back to Discourse with the query string. For example:\r\n```javascript\r\nres.redirect('http://discourse.example.com/session/sso_login?' + q);\r\n```\r\n\r\n## License\r\n\r\nMIT\r\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/ArmedGuy/discourse_sso_node/issues"
  },
  "homepage": "https://github.com/ArmedGuy/discourse_sso_node",
  "_id": "discourse-sso@1.0.3",
  "dist": {
    "shasum": "263d72d47c69f6407722b970bd68149e4214f629"
  },
  "_from": "discourse-sso@^1.0.3",
  "_resolved": "https://registry.npmjs.org/discourse-sso/-/discourse-sso-1.0.3.tgz"
}

{
  "name": "s3-uploader",
  "version": "2.0.1",
  "description": "Resize, rename, and upload images to AWS S3",
  "main": "index.js",
  "files": [
    "index.js"
  ],
  "scripts": {
    "codacy-coverage": "codacy-coverage",
    "cover": "istanbul cover --report lcovonly ./node_modules/.bin/_mocha -- -r test/support/env test/**",
    "lint": "eslint index.js test",
    "nsp": "nsp check",
    "semantic-release": "semantic-release",
    "start": "supervisor index.js",
    "test": "mocha -b -c --check-leaks -R tap -r test/support/env test/**",
    "test:watch": "mocha -w -b -c --check-leaks -R progress -r test/support/env test/**",
    "greenkeeper-postpublish": "greenkeeper-postpublish"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/Turistforeningen/node-s3-uploader.git"
  },
  "keywords": [
    "aws",
    "s3",
    "imagemagic",
    "image",
    "resize",
    "rename",
    "upload",
    "versions"
  ],
  "author": {
    "name": "Den Norske Turistforening",
    "email": "opensource@turistforeningen.no",
    "url": "DNT"
  },
  "contributors": [
    {
      "name": "Håvard Ranum",
      "email": "havard.ranum@bouvet.no"
    },
    {
      "name": "Hans Kristian Flaatten",
      "email": "hans@starefossen.com"
    },
    {
      "name": "Anthony Ringoet",
      "email": "anthonyringoet@gmail.com"
    },
    {
      "name": "Luiz Freneda",
      "email": "lfreneda@gmail.com"
    },
    {
      "name": "Oleksii Sribnyi",
      "email": "me@codemanki.com"
    }
  ],
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/Turistforeningen/node-s3-uploader/issues"
  },
  "homepage": "https://github.com/Turistforeningen/node-s3-uploader#readme",
  "dependencies": {
    "async": "^1.5.2",
    "aws-sdk": "^2.4.1",
    "im-metadata": "^3.0.0",
    "im-resize": "^2.3.1",
    "node-uuid": "^1.4.7"
  },
  "devDependencies": {
    "@starefossen/rand-path": "^2.0.0",
    "codacy-coverage": "^1.1.3",
    "eslint": "^2.11.0",
    "eslint-config-airbnb-base": "^3.0.1",
    "eslint-plugin-import": "^1.8.1",
    "greenkeeper-postpublish": "^1.0.0",
    "istanbul": "^0.4.3",
    "mocha": "^2.5.3",
    "nsp": "^2.4.0",
    "semantic-release": "^4.3.5"
  },
  "engines": {
    "node": ">=4.0.0"
  },
  "readme": "AWS S3 Image Uploader\n=====================\n\n**Documentation for `s3-uploader@1.1` can be found [here](https://github.com/Turistforeningen/node-s3-uploader/blob/stable/1.x/README.md).**\n\n[![Build status](https://app.wercker.com/status/9c42c66dcef6429b52989b2a61c85c7b/s \"wercker status\")](https://app.wercker.com/project/bykey/9c42c66dcef6429b52989b2a61c85c7b)\n[![Codacy grade](https://img.shields.io/codacy/grade/17ede08ebf51447296922d6f2b1ee83c.svg \"Codacy grade\")](https://www.codacy.com/app/DNT/node-s3-uploader)\n[![Codacy coverage](https://img.shields.io/codacy/coverage/17ede08ebf51447296922d6f2b1ee83c.svg \"Codacy coverage\")](https://www.codacy.com/app/DNT/node-s3-uploader)\n[![NPM downloads](https://img.shields.io/npm/dm/s3-uploader.svg \"NPM downloads\")](https://www.npmjs.com/package/s3-uploader)\n[![NPM version](https://img.shields.io/npm/v/s3-uploader.svg \"NPM version\")](https://www.npmjs.com/package/s3-uploader)\n[![Node version](https://img.shields.io/node/v/s3-uploader.svg \"Node version\")](https://www.npmjs.com/package/s3-uploader)\n[![Dependency status](https://img.shields.io/david/Turistforeningen/node-s3-uploader.svg \"Dependency status\")](https://david-dm.org/Turistforeningen/node-s3-uploader)\n[![Join the chat](https://img.shields.io/badge/gitter-join%20chat-blue.svg \"Join the chat\")](https://gitter.im/Turistforeningen/node-s3-uploader)\n\nFlexible and efficient image resize, rename, and upload to Amazon S3 disk\nstorage. Uses the official [AWS Node SDK](http://aws.amazon.com/sdkfornodejs/),\nand [im-resize](https://github.com/Turistforeningen/node-im-resize) and\n[im-metadata](https://github.com/Turistforeningen/node-im-metadata) for image\nprocessing.\n\n![Overview of image upload to AWS S3](https://docs.google.com/drawings/d/1EZaE8LaQ6FRSg4R-2QQiT1af-y2AgDknBGrx6SPIKy0/pub?w=766&h=216)\n\n## Changelog\n\nAll changes are documentated on the [releases page](https://github.com/Turistforeningen/node-s3-uploader/releases).\nChanges for latest release can be [found here](https://github.com/Turistforeningen/node-s3-uploader/releases/latest).\n\n## Install\n\n```\nnpm install s3-uploader --save\n```\n\n## Requirements\n\n* Node.JS >= v4.0.0\n* ImageMagic >= v6.8\n\n## API\n\n```javascript\nvar Upload = require('s3-uploader');\n```\n\n### new Upload(**string** `awsBucketName`, **object** `opts`)\n\n* **string** `awsBucketName` - name of Amazon S3 bucket\n* **object** `opts` - global upload options\n  * **object** `cleanup`\n    * **boolean** `original` - remove original image after successful upload (**default**: `false`)\n    * **boolean** `versions` - remove thumbnail versions after sucessful upload (**default**: `false`)\n\n  * **boolean** `returnExif` - return exif data for original image (**default** `false`)\n\n  * **string** `url` - custom public url (**default** build from `region` and `awsBucketName`)\n\n  * **object** `aws` - see [note](#aws-note)\n    * **string** `region` - region for you bucket (**default** `us-east-1`)\n    * **string** `path` - path within your bucket (**default** `\"\"`)\n    * **string** `acl` - default ACL for uploaded images (**default** `private`)\n    * **string** `accessKeyId` - AWS access key ID override\n    * **string** `secretAccessKey` - AWS secret access key override\n\n  * **object** `resize`\n    * **string** `path` - local directory for resized images (**default**: same as original image)\n    * **string** `prefix` - local file name prefix for resized images (**default**: `\"\"`)\n    * **integer** `quality` - default quality for resized images (**default**: `70`)\n\n  * **object[]** `versions`\n    * **string** `suffix` - image file name suffix (**default** `\"\"`)\n    * **number** `quality` - image resize quality\n    * **string** `format` - force output image file format (**default** `format of original image`)\n    * **number** `maxWidth` - max width for resized image\n    * **number** `maxHeight` - max height for resized image\n    * **string** `aspect` - force aspect ratio for resized image (**example:** `4:3`\n    * **string** `background` - set background for transparent images (**example:** `red`)\n    * **boolean** `flatten` - flatten backgrund for transparent images\n    * **string** `awsImageAcl` - access control for AWS S3 upload (**example:** `private`)\n    * **number** `awsImageExpires` - add `Expires` header to image version\n    * **number** `awsImageMaxAge` - add `Cache-Control: max-age` header to image version\n\n  * **object** `original`\n    * **string** `awsImageAcl` - access control for AWS S3 upload (**example:** `private`)\n    * **number** `awsImageExpires` - add `Expires` header to image version\n    * **number** `awsImageMaxAge` - add `Cache-Control: max-age` header to image version\n\n  * **function** `randomPath` - custom random path function\n\n#### AWS note\n> The `aws` object is passed directly to `aws-sdk`. You can add any of [these\n> options](http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor_details)\n> in order to fine tune the connection – if you know what you are doing.\n\n#### Example\n\n```javascript\nvar client = new Upload('my_s3_bucket', {\n  aws: {\n    path: 'images/',\n    region: 'us-east-1',\n    acl: 'public-read'\n  },\n\n  cleanup: {\n    versions: true,\n    original: false\n  },\n\n  original: {\n    awsImageAcl: 'private'\n  },\n\n  versions: [{\n    maxHeight: 1040,\n    maxWidth: 1040,\n    format: 'jpg',\n    suffix: '-large',\n    quality: 80,\n    awsImageExpires: 31536000,\n    awsImageMaxAge: 31536000\n  },{\n    maxWidth: 780,\n    aspect: '3:2!h',\n    suffix: '-medium'\n  },{\n    maxWidth: 320,\n    aspect: '16:9!h',\n    suffix: '-small'\n  },{\n    maxHeight: 100,\n    aspect: '1:1',\n    format: 'png',\n    suffix: '-thumb1'\n  },{\n    maxHeight: 250,\n    maxWidth: 250,\n    aspect: '1:1',\n    suffix: '-thumb2'\n  }]\n});\n```\n\n### #upload(**string** `src`, **object** `opts`, **function** `cb`)\n\n* **string** `src` - path to the image you want to upload\n\n* **object** `opts`\n  * **string** `awsPath` - override the path on AWS set through `opts.aws.path`\n  * **string** `path` - set absolute path for uploaded image (disables random path)\n\n* **function** `cb` - callback function (**Error** `err`, **object[]** `versions`, **object** `meta`)\n  * **Error** `err` - `null` if everything went fine\n  * **object[]** `versions` - original and resized images with path/location\n  * **object** `meta` - metadata for original image\n\n#### Example\n\n```javascript\nclient.upload('/some/image.jpg', {}, function(err, versions, meta) {\n  if (err) { throw err; }\n\n  versions.forEach(function(image) {\n    console.log(image.width, image.height, image.url);\n    // 1024 760 https://my-bucket.s3.amazonaws.com/path/110ec58a-a0f2-4ac4-8393-c866d813b8d1.jpg\n  });\n});\n```\n\n#### Algorithm\n\n```\nA\n+-- B\n    `-- C\n    `-- D\n    `-- E\n\nWhere A is the original image uploaded by the user. An mpc image is created, B,\nwhich is used to crate the thumbnails C, D, and E.\n```\n\n## Collaborators\n\nIndividuals making significant and valuable contributions are made Collaborators\nand given commit-access to the project. These individuals are identified by the\nexisting Collaborators and their addition as Collaborators is discussed as a\npull request to this project's README.md.\n\nNote: If you make a significant contribution and are not considered for\ncommit-access log an issue or contact one of the Collaborators directly.\n\n* Hans Kristian Flaatten: [@Starefossen](https://github.com/Starefossen),\n  [@Starefossen](https://twitter.com/starefossen)\n* Anthony Ringoet: [@anthonyringoet](https://github.com/anthonyringoet),\n  [@anthonyringoet](https://twitter.com/anthonyringoet)\n\n## [MIT License](https://github.com/Turistforeningen/node-s3-uploader/blob/master/LICENSE)\n",
  "readmeFilename": "README.md",
  "_id": "s3-uploader@2.0.1",
  "dist": {
    "shasum": "aeca9958ebb9c674dd16a29a561f7a3554b9d1ee"
  },
  "_from": "s3-uploader@",
  "_resolved": "https://registry.npmjs.org/s3-uploader/-/s3-uploader-2.0.1.tgz"
}
